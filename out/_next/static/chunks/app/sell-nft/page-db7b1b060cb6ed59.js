(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2763],{33778:function(e,n,t){Promise.resolve().then(t.bind(t,63128))},72895:function(e,n,t){"use strict";let a=t(17076),s=t(85061),r=t(24717),l=t(33745);e.exports={networkMappingAddresses:a,abiNftMarketplace:s,abiERC721:r,abiERC20:l}},34377:function(e,n,t){"use strict";t.d(n,{v:function(){return i}});var a=t(54463),s=t(75856),r=t(8483),l=t(62146),o=t(14854);let i=(0,a._)({chains:[r.F,l.d,o.c],transports:{[r.F.id]:(0,s.d)(),[l.d.id]:(0,s.d)(),[o.c.id]:(0,s.d)()}})},63128:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return T}});var a=t(57437);t(66648);var s=t(26735),r=t(22671),l=t(58569),o=t(294),i=t(66939),p=t(73336),u=t(72895),y=t(60479),d=t(46717),c=t(28509),m=t(42921),f=t(98286),b=t(2265),g=t(34377),h=t(42467);function T(){let{isConnected:e,isDisconnected:n,address:t}=(0,s.m)(),T=(0,f.x)(),v=(0,b.useRef)(T);console.log("(initialChainId: ".concat(T,")")),(0,b.useEffect)(()=>{T!==v.current&&window.location.reload()},[T]);let C=T in u.networkMappingAddresses?u.networkMappingAddresses[T].NftMarketplace[0]:null,[k,x]=(0,b.useState)("0"),[w]=r.Z.useForm(),[M,A]=l.ZP.useMessage(),{isPending:L,writeContract:N}=(0,y.S)();function I(e){return new Promise(n=>setTimeout(n,e))}let _=async e=>{console.log("Approving...");let n=e.nftAddress;console.log("NFT Address:",n);let t=e.tokenId;console.log("Token ID:",t);let a=(0,c.f)(String(e.price)).toString(),s={abi:u.abiERC721,address:n,functionName:"approve",args:[C,BigInt(t)]};console.log("writeContractApproveListing..."),w.resetFields(),M.open({type:"loading",content:"Waiting for confirmation...",duration:0}),N(s,{onError:e=>{var n;console.log(null!==(n=e.message)&&void 0!==n?n:e.shortMessage),M.destroy(),M.open({type:"error",content:e.shortMessage})},onSuccess:async e=>{await F(e,n,t,a)}})};async function F(e,n,t,a){M.destroy(),console.log("Waiting for block Confirmations Approve listing..."),console.log(e),M.open({type:"loading",content:"Waiting for block Confirmations...",duration:0}),11155111==T?(await I(15e3),(0,d.e)(g.v,{hash:e,confirmations:1})):await (0,d.e)(g.v,{hash:e,confirmations:1}),console.log("Approve listing confirmed! (with ".concat(1," blockConfirmations)")),M.destroy(),console.log("Ok! Now time to list"),console.log("NFT Address:",n),console.log("Token ID:",t),console.log("Price:",(0,m.b)(BigInt(a),18),"CAR"),M.open({type:"loading",content:"Waiting for confirmation...",duration:0}),N({abi:u.abiNftMarketplace,address:C,functionName:"listItem",args:[n,BigInt(t),BigInt(a)]},{onError:e=>{var n;console.log(null!==(n=e.message)&&void 0!==n?n:e.shortMessage),M.destroy(),M.open({type:"error",content:e.message.includes("NftMarketplace__NotApprovedForMarketplace")?"Maybe the network is currently very busy, please try again later.":e.shortMessage})},onSuccess:async e=>{await j(e)}})}async function j(e){M.destroy(),console.log("Waiting for block Confirmations List item..."),console.log(e),M.open({type:"loading",content:"Waiting for block Confirmations...",duration:0}),11155111==T?(await I(1e4),(0,d.e)(g.v,{hash:e,confirmations:1})):await (0,d.e)(g.v,{hash:e,confirmations:1}),console.log("List item confirmed! (with ".concat(1," blockConfirmations)")),M.destroy(),M.open({type:"success",content:"List item confirmed!"})}let P={abi:u.abiNftMarketplace,address:C,functionName:"withdrawProceeds",args:[]},B=async e=>{M.destroy(),console.log("Waiting for block Confirmations Withdraw Proceeds..."),console.log(e),M.open({type:"loading",content:"Waiting for block Confirmations...",duration:0}),11155111==T?(await I(1e4),(0,d.e)(g.v,{hash:e,confirmations:1})):await (0,d.e)(g.v,{hash:e,confirmations:1}),console.log("Withdraw confirmed! (with ".concat(1," blockConfirmations)")),M.destroy(),E(),M.open({type:"success",content:"Withdraw confirmed!"})};async function E(){(11155111==T||31337==T)&&x((await (0,h.L)(g.v,{abi:u.abiNftMarketplace,address:C,functionName:"getProceeds",args:[t]})).toString())}return(0,b.useEffect)(()=>{e&&E()},[t,e,T]),(0,a.jsxs)(a.Fragment,{children:[A,(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:" flex flex-col items-center justify-center h-screen space-y-10",children:[(0,a.jsxs)("h1",{className:" text-4xl font-mono font-bold text-rose-500",children:[n&&"Connet your wallet (with sepolia network / bscTestnet)",e&&11155111!=T&&97!=T&&"Please switch to sepolia network / bscTestnet"]}),e&&(11155111==T||97==T)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:" text-4xl font-mono font-bold text-rose-500",children:"Sell Carbon Credit NFT"}),(0,a.jsxs)(r.Z,{form:w,size:"large",name:"mainForm",onFinish:_,autoComplete:"off",layout:"vertical",initialValues:{nftAddress:null,tokenId:null,price:null},children:[(0,a.jsx)(r.Z.Item,{label:"NFT Carbon Credit Address",name:"nftAddress",rules:[{required:!0,message:"Please input your NFT Carbon Credit Address!"}],children:(0,a.jsx)(o.Z,{})}),(0,a.jsx)(r.Z.Item,{label:"Token ID",name:"tokenId",rules:[{type:"number",required:!0,min:0,message:"Please input valid Token ID!"}],children:(0,a.jsx)(i.Z,{min:0})}),(0,a.jsx)(r.Z.Item,{label:"Price (CAR)",name:"price",rules:[{type:"number",required:!0,min:0,message:"Please input valid price!"}],children:(0,a.jsx)(i.Z,{min:0})}),(0,a.jsx)(r.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,a.jsx)(p.ZP,{type:"primary",size:"large",htmlType:"submit",disabled:L,children:"Submit"})})]}),(0,a.jsx)("div",{children:0!=k&&(0,a.jsxs)("h1",{className:" text-2xl font-mono font-bold text-green-500",children:["Withdraw: ",(0,m.b)(k,18)," CAR"]})}),"0"!=k?(0,a.jsx)(p.ZP,{type:"primary",onClick:()=>{M.open({type:"loading",content:"Waiting for confirmation...",duration:0}),N(P,{onError:e=>{var n;console.log(null!==(n=e.message)&&void 0!==n?n:e.shortMessage),M.destroy(),M.open({type:"error",content:e.shortMessage})},onSuccess:async e=>{await B(e)}})},children:"Withdraw"}):(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:" text-2xl font-mono font-bold text-blue-400",children:"No proceeds detected"})})]})]})})]})}},33745:function(e){"use strict";e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_value","type":"uint256"}],"name":"burn","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_value","type":"uint256"}],"name":"burnFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"},{"name":"_extraData","type":"bytes"}],"name":"approveAndCall","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"initialSupply","type":"uint256"},{"name":"tokenName","type":"string"},{"name":"tokenSymbol","type":"string"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Burn","type":"event"},{"inputs":[],"name":"CARfaucet","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},24717:function(e){"use strict";e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"balance","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"operator","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"_approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},85061:function(e){"use strict";e.exports=JSON.parse('[{"type":"constructor","inputs":[{"name":"tokenAddressCAR","type":"address","baseType":"address","components":null,"arrayLength":null,"arrayChildren":null}],"payable":false,"gas":null},{"type":"error","inputs":[{"name":"nftAddress","type":"address","baseType":"address","components":null,"arrayLength":null,"arrayChildren":null},{"name":"tokenId","type":"uint256","baseType":"uint256","components":null,"arrayLength":null,"arrayChildren":null}],"name":"NftMarketplace__AlreadyListed"},{"type":"error","inputs":[],"name":"NftMarketplace__NoProceeds"},{"type":"error","inputs":[],"name":"NftMarketplace__NotApprovedForMarketplace"},{"type":"error","inputs":[{"name":"nftAddress","type":"address","baseType":"address","components":null,"arrayLength":null,"arrayChildren":null},{"name":"tokenId","type":"uint256","baseType":"uint256","components":null,"arrayLength":null,"arrayChildren":null}],"name":"NftMarketplace__NotListed"},{"type":"error","inputs":[],"name":"NftMarketplace__NotOwner"},{"type":"error","inputs":[],"name":"NftMarketplace__PriceMustBeAboveZero"},{"type":"error","inputs":[{"name":"nftAddress","type":"address","baseType":"address","components":null,"arrayLength":null,"arrayChildren":null},{"name":"tokenId","type":"uint256","baseType":"uint256","components":null,"arrayLength":null,"arrayChildren":null},{"name":"price","type":"uint256","baseType":"uint256","components":null,"arrayLength":null,"arrayChildren":null}],"name":"NftMarketplace__PriceNotMet"},{"type":"error","inputs":[],"name":"NftMarketplace__TransferFailed"},{"type":"error","inputs":[],"name":"ReentrancyGuardReentrantCall"},{"type":"event","inputs":[{"name":"buyer","type":"address","baseType":"address","indexed":true,"components":null,"arrayLength":null,"arrayChildren":null},{"name":"nftAddress","type":"address","baseType":"address","indexed":true,"components":null,"arrayLength":null,"arrayChildren":null},{"name":"tokenId","type":"uint256","baseType":"uint256","indexed":true,"components":null,"arrayLength":null,"arrayChildren":null},{"name":"price","type":"uint256","baseType":"uint256","indexed":false,"components":null,"arrayLength":null,"arrayChildren":null}],"name":"ItemBought","anonymous":false},{"type":"event","inputs":[{"name":"seller","type":"address","baseType":"address","indexed":true,"components":null,"arrayLength":null,"arrayChildren":null},{"name":"nftAddress","type":"address","baseType":"address","indexed":true,"components":null,"arrayLength":null,"arrayChildren":null},{"name":"tokenId","type":"uint256","baseType":"uint256","indexed":true,"components":null,"arrayLength":null,"arrayChildren":null}],"name":"ItemCanceled","anonymous":false},{"type":"event","inputs":[{"name":"seller","type":"address","baseType":"address","indexed":true,"components":null,"arrayLength":null,"arrayChildren":null},{"name":"nftAddress","type":"address","baseType":"address","indexed":true,"components":null,"arrayLength":null,"arrayChildren":null},{"name":"tokenId","type":"uint256","baseType":"uint256","indexed":true,"components":null,"arrayLength":null,"arrayChildren":null},{"name":"price","type":"uint256","baseType":"uint256","indexed":false,"components":null,"arrayLength":null,"arrayChildren":null}],"name":"ItemListed","anonymous":false},{"type":"function","inputs":[{"name":"nftAddress","type":"address","baseType":"address","components":null,"arrayLength":null,"arrayChildren":null},{"name":"tokenId","type":"uint256","baseType":"uint256","components":null,"arrayLength":null,"arrayChildren":null}],"name":"buyItem","constant":false,"outputs":[],"stateMutability":"payable","payable":true,"gas":null},{"type":"function","inputs":[{"name":"nftAddress","type":"address","baseType":"address","components":null,"arrayLength":null,"arrayChildren":null},{"name":"tokenId","type":"uint256","baseType":"uint256","components":null,"arrayLength":null,"arrayChildren":null}],"name":"cancelListing","constant":false,"outputs":[],"stateMutability":"nonpayable","payable":false,"gas":null},{"type":"function","inputs":[{"name":"nftAddress","type":"address","baseType":"address","components":null,"arrayLength":null,"arrayChildren":null},{"name":"tokenId","type":"uint256","baseType":"uint256","components":null,"arrayLength":null,"arrayChildren":null}],"name":"getListing","constant":true,"outputs":[{"name":"","type":"tuple","baseType":"tuple","components":[{"name":"price","type":"uint256","baseType":"uint256","components":null,"arrayLength":null,"arrayChildren":null},{"name":"seller","type":"address","baseType":"address","components":null,"arrayLength":null,"arrayChildren":null}],"arrayLength":null,"arrayChildren":null}],"stateMutability":"view","payable":false,"gas":null},{"type":"function","inputs":[{"name":"seller","type":"address","baseType":"address","components":null,"arrayLength":null,"arrayChildren":null}],"name":"getProceeds","constant":true,"outputs":[{"name":"","type":"uint256","baseType":"uint256","components":null,"arrayLength":null,"arrayChildren":null}],"stateMutability":"view","payable":false,"gas":null},{"type":"function","inputs":[],"name":"i_tokenCAR","constant":true,"outputs":[{"name":"","type":"address","baseType":"address","components":null,"arrayLength":null,"arrayChildren":null}],"stateMutability":"view","payable":false,"gas":null},{"type":"function","inputs":[{"name":"nftAddress","type":"address","baseType":"address","components":null,"arrayLength":null,"arrayChildren":null},{"name":"tokenId","type":"uint256","baseType":"uint256","components":null,"arrayLength":null,"arrayChildren":null},{"name":"price","type":"uint256","baseType":"uint256","components":null,"arrayLength":null,"arrayChildren":null}],"name":"listItem","constant":false,"outputs":[],"stateMutability":"nonpayable","payable":false,"gas":null},{"type":"function","inputs":[{"name":"nftAddress","type":"address","baseType":"address","components":null,"arrayLength":null,"arrayChildren":null},{"name":"tokenId","type":"uint256","baseType":"uint256","components":null,"arrayLength":null,"arrayChildren":null},{"name":"newPrice","type":"uint256","baseType":"uint256","components":null,"arrayLength":null,"arrayChildren":null}],"name":"updateListing","constant":false,"outputs":[],"stateMutability":"nonpayable","payable":false,"gas":null},{"type":"function","inputs":[],"name":"withdrawProceeds","constant":false,"outputs":[],"stateMutability":"nonpayable","payable":false,"gas":null}]')},17076:function(e){"use strict";e.exports=JSON.parse('{"97":{"NftMarketplace":["0x3BA31EB2e718a7E23b08A81662159Bf4c1eF625C"],"TokenCAR":["0xBd1E7B1aca9B037675b2Fb10d909F1e43fD77eB8"]},"31337":{"NftMarketplace":["0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512"],"TokenCAR":["0x5FbDB2315678afecb367f032d93F642f64180aa3"]},"11155111":{"NftMarketplace":["0xaFe2924A9993AF0a3810846F2F5EdC37cE5cA1Aa"],"TokenCAR":["0xFAE5AeB08ef7A21A4fDc6fC776466B62b57676cC"]}}')}},function(e){e.O(0,[5630,1209,9544,8666,6483,5955,5561,2971,7023,1744],function(){return e(e.s=33778)}),_N_E=e.O()}]);